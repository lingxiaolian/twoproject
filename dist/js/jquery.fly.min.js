"use strict";!function(u){u.fly=function(t,e){var l={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:u.noop},i=this,f=u(t);i.init=function(t){this.setOptions(t),this.settings.autoPlay&&this.play()},i.setOptions=function(t){this.settings=u.extend(!0,{},l,t);var e=this.settings,i=e.start,n=e.end;f.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=n.width&&null!=n.height&&u.extend(!0,i,{width:f.width(),height:f.height()});var o=Math.min(i.top,n.top)-Math.abs(i.left-n.left)/3;o<e.vertex_Rtop&&(o=Math.min(e.vertex_Rtop,Math.min(i.top,n.top)));var h=Math.sqrt(Math.pow(i.top-n.top,2)+Math.pow(i.left-n.left,2)),a=Math.ceil(Math.min(Math.max(Math.log(h)/.05-75,30),100)/e.speed),s=i.top==o?0:-Math.sqrt((n.top-o)/(i.top-o)),p=(s*i.left-n.left)/(s-1),r=n.left==p?0:(n.top-o)/Math.pow(n.left-p,2);u.extend(!0,e,{count:-1,steps:a,vertex_left:p,vertex_top:o,curvature:r})},i.play=function(){this.move()},i.move=function(){var t=this.settings,e=t.start,i=t.count,n=t.steps,o=t.end,h=e.left+(o.left-e.left)*i/n,a=0==t.curvature?e.top+(o.top-e.top)*i/n:t.curvature*Math.pow(h-t.vertex_left,2)+t.vertex_top;if(null!=o.width&&null!=o.height){var s=n/2,p=o.width-(o.width-e.width)*Math.cos(i<s?0:(i-s)/(n-s)*Math.PI/2),r=o.height-(o.height-e.height)*Math.cos(i<s?0:(i-s)/(n-s)*Math.PI/2);f.css({width:p+"px",height:r+"px","font-size":Math.min(p,r)+"px"})}f.css({left:h+"px",top:a+"px"}),t.count++;var l=window.requestAnimationFrame(u.proxy(this.move,this));i==n&&(window.cancelAnimationFrame(l),t.onEnd.apply(this))},i.destory=function(){f.remove()},i.init(e)},u.fn.fly=function(t){return this.each(function(){null==u(this).data("fly")&&u(this).data("fly",new u.fly(this,t))})}}(jQuery);