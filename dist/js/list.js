"use strict";function ajax(a,e,n,i){var t=new XMLHttpRequest;"get"==a&&n&&(e=e+"?day="+new Date+"&"+n),t.open(a,e,!0),"get"==a?t.send(null):(t.setRequestHeader("content-type","application/x-www-form-urlencoded"),t.send(n)),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?i&&i(t.responseText):alert("出错了，因为："+t.status))}}var D_top2_right=getid("D_top2_right"),moren=getid("moren"),price=getid("price");price.onclick=function(){ajax("get","../src/api/order.php","page=1&qty=32",function(a){var e=JSON.parse(a);show(e.list);for(var n=e.total,i=e.page,t=Math.ceil(n/e.qty),s="",r=0;r<t;r++)s+="<span>"+(r+1)+"</span>";page.innerHTML='<a href="javascript:;" class=\'one\'>首页</a>\n    <a href="javascript:;" class="pre-page">上一页</a>'+s+'<a href="" class="next-page">下一页</a>\n    <a href="">尾页</a>\n</div>\n<i>共<i>'+t+"</i>页<i>",pagenum.innerHTML="<span>"+page+"/"+n+"</span>",getid("b3").innerHTML=i,getid("b4").innerHTML=t,D_top2_right.innerHTML=n,page.children[0].className="active"}),page.onclick=function(r){if("span"==(r=r||window.event).target.tagName.toLowerCase())ajax("get","../src/api/order.php","qty=32&page="+r.target.innerHTML,function(a){console.log(a);var e=JSON.parse(a);console.log(e);var n=e.total,i=Math.ceil(n/e.qty);show(e.list);for(var t=0;t<page.children.length;t++)page.children[t].className="";var s=e.page;getid("b3").innerHTML=s,console.log(s),getid("b4").innerHTML=i,r.target.className="active"});else if("pre-page"==r.target.className){ajax("get","../src/api/03goodslist.php","qty=32&page="+r.target.innerHTML-1,function(a){console.log(a);var e=JSON.parse(a);console.log(e);var n=e.total,i=Math.ceil(n/e.qty);show(e.list);for(var t=0;t<page.children.length;t++)page.children[t].className="";var s=e.page;getid("b3").innerHTML=s,console.log(s),getid("b4").innerHTML=i,r.target.className="active"})}}},moren.onclick=function(){ajax("get","../src/api/oderid.php","page=1&qty=32",function(a){var e=JSON.parse(a);show(e.list);for(var n=e.total,i=e.page,t=Math.ceil(n/e.qty),s="",r=0;r<t;r++)s+="<span>"+(r+1)+"</span>";page.innerHTML='<a href="javascript:;" class="one">首页</a>\n    <a href="javascript:;" class="pre-page">上一页</a>'+s+'<a href="javascript:;" class="next-page">下一页</a>\n    <a href="javascript:;" class="two">尾页</a>\n</div>\n<i>共<i>'+t+"</i>页<i>",pagenum.innerHTML="<span>"+page+"/"+n+"</span>",getid("b3").innerHTML=i,getid("b4").innerHTML=t,D_top2_right.innerHTML=n,page.children[0].className="active"})};var pagenum=document.getElementsByClassName("pagenum"),list=getid("list"),page=getid("page"),list2=list.getElementsByTagName("img");function show(a){var e=a.map(function(a){return'<li class="item" data-id="'+a.id+'">\n            <ol>\n                <div class="pic">\n                    <a href="javascript:;">\n                        <img alt="'+a.show+'"\n                            src="'+a.img+'" style="display: inline;">\n                        <div class="name" style="bottom: 0px;">\n                            <p>'+a.man+'\n                                <span></span>\n                            </p>\n                        </div>\n                    </a>\n                    <div class="sold_size" style="top: 0px;">\n                        <p class="sold_size_tit">可售尺码：</p>\n                        <ul class="sold_size_list clearfix J_sizeArea">\n                            <div class="ssl_item">\n                                <span>'+a.size+'</span>\n                            </div>\n                        </ul>\n                    </div>\n                </div>\n                \n                <div class="tit">\n                    <span>\n                       '+a.pinpai+'\n                    </span>\n                    <a href="javascript:;"\n                        target="_blank">'+a.show+'</a>\n                </div>\n                <div class="price">\n                    <span class="showprice ">'+a.price+'</span>\n                </div>\n            </ol>\n            <div class="cl"></div>\n        </li>'}).join("");list.innerHTML=e}var url="../src/api/03goodslist.php",data="page=1&qty=32";ajax("get",url,data,function(a){var e=JSON.parse(a);show(e.list);for(var n=e.total,i=e.page,t=Math.ceil(n/e.qty),s="",r=0;r<t;r++)s+="<span>"+(r+1)+"</span>";page.innerHTML='<a href="javascript:;" class=\'one\'>首页</a>\n    <a href="javascript:;" class="pre-page">上一页</a>'+s+'<a href="" class="next-page">下一页</a>\n    <a href="">尾页</a>\n</div>\n<i>共<i>'+t+"</i>页<i>",pagenum.innerHTML="<span>"+page+"/"+n+"</span>",getid("b3").innerHTML=i,getid("b4").innerHTML=t,D_top2_right.innerHTML=n,page.children[0].className="active"}),page.onclick=function(r){if("span"==(r=r||window.event).target.tagName.toLowerCase()){ajax("get","../src/api/03goodslist.php","qty=32&page="+r.target.innerHTML,function(a){console.log(a);var e=JSON.parse(a);console.log(e);var n=e.total,i=Math.ceil(n/e.qty);show(e.list);for(var t=0;t<page.children.length;t++)page.children[t].className="";var s=e.page;getid("b3").innerHTML=s,console.log(s),getid("b4").innerHTML=i,r.target.className="active"})}},ajax("get",url,data,function(a){var n=JSON.parse(a);for(var e in console.log(list2),console.log(n),list2)list2[e].index=e,list2[e].onclick=function(){console.log(this.index),console.log(n.list[this.index]);var a="";for(var e in n.list[this.index])a+=e+"="+n.list[this.index][e]+"&";a=a.slice(0,-1),console.log(a),location.href="../html/goods.html?"+a}});